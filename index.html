<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="./style.css" />
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;300;400;700;900&family=Poppins:wght@100;300;400;500;600;700;800;900&display=swap"
            rel="stylesheet"
        />

        <title>qwerty</title>
    </head>

    <body>
        <div class="aside">
            <a href="index.html">
                <div class="logo_bx">
                    <img src="./img/LCK.png" alt="LCK_logo" />
                </div>
            </a>
            <div class="nav_modal">
                <ul>
                    <li>
                        <a href="">
                            About
                        </a>
                    </li>
                    <li>
                        <a href="">
                            News
                        </a>
                    </li>
                    <li>
                        <a href="">
                            DK
                            <span>Dplus Kia</span>
                        </a>
                    </li>
                    <li>
                        <a href="">
                            DRX
                            <span></span>
                        </a>
                    </li>
                    <li>
                        <a href="">
                            GEN
                            <span>Gen.G Esports</span>
                        </a>
                    </li>
                    <li>
                        <a href="">
                            HLE
                            <span>Hanwha Life Esports</span>
                        </a>
                    </li>
                    <li>
                        <a href="">
                            KDF
                            <span>KWANGDONG FREECS</span>
                        </a>
                    </li>
                    <li>
                        <a href="">
                            KT
                            <span>kt Rolster</span>
                        </a>
                    </li>
                    <li>
                        <a href="">
                            LSB
                            <span>Liiv SANDBOX</span>
                        </a>
                    </li>
                    <li>
                        <a href="">
                            NS
                            <span>Nongshim RedForce</span>
                        </a>
                    </li>
                    <li>
                        <a href="">
                            BRO
                            <span>OKSavingsBank BRION</span>
                        </a>
                    </li>
                    <li>
                        <a href="">
                            T1
                            <span></span>
                        </a>
                    </li>
                </ul>
            </div>
            <div class="hamburger">
                <span class="petty"></span>
            </div>
        </div>
        <div class="main">
            <div id="page_01" class="page">
                <div class="headline">
                    <div>ORIGIN</div>
                    <div>AGAIN</div>
                    <div class="headline_sub">
                        <div>2023 LoL Champions Korea</div>
                    </div>
                </div>
            </div>
            <div id="page_02" class="page">
                <div class="headline">
                    <div>PAGE</div>
                    <div>2</div>
                    <div class="headline_sub">
                        <div>news</div>
                    </div>
                </div>
            </div>
            <div id="page_03" class="page">
                <div class="headline">
                    <div>PAGE</div>
                    <div>3</div>
                    <div class="headline_sub">
                        <div>team</div>
                    </div>
                </div>
            </div>
            <div id="page_04" class="page">
                <div class="headline">
                    <div>PAGE</div>
                    <div>4</div>
                    <div class="headline_sub">
                        <div>ranking</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="component">
            <div class="category">
                <div class="category__label">
                    <span>Main</span>
                    <span>News</span>
                    <span>Team</span>
                    <span>Ranking</span>
                </div>
            </div>
            <div class="page_number">
                <div class="page_number__now"></div>
                <div>of</div>
                <div>4</div>
            </div>
            <div class="aside_line"></div>
            <div class="section_line"></div>
            <div class="breadcrumbs">scroll down</div>
        </div>
    </body>
</html>
<script>
    const q = (q) => document.querySelector(q);
    const qAll = (q) => document.querySelector(q);

    //----------햄버거 메뉴 제어----------
    q(".hamburger").addEventListener("click", toggleHamburgerMenu);

    function toggleHamburgerMenu() {
        q(".hamburger").classList.toggle("active");
    }

    //----------풀 페이지 & 스크롤 이벤트 제어----------
    window.addEventListener(
        "wheel",
        function (e) {
            e.preventDefault();
        },
        { passive: false }
    ); //마우스 휠 기본이벤트 제거

    const html = q("html");
    let page = 1;
    const lastPage = q(".category__label").childElementCount;
    const componentLineHeight = 25;

    for (let i = 1; i <= lastPage; i++) {
        q(".page_number__now").innerHTML += `<div>${i}</div>`;
    }

    window.addEventListener("wheel", throttle(scrollHandler, 300)); //최종 풀페이지 & 스크롤 이벤트 제어

    /**
     * delay 시간이 경과하기 전에 이벤트가 발생하면 아무것도 하지 않다가
     * delay 시간이 경과했을 때 이벤트가 발생하면 콜백 함수를 호출하고 새로운 타이머를 재설정한다.
     * 즉, delay 시간 간격으로 콜백 함수가 호출된다.
     * @param {srting} callback - 적용시킬 함수
     * @param {number} delay - event block 시킬 ms
     */
    function throttle(callback, delay) {
        let timer;
        return (e) => {
            if (timer) return;
            timer = setTimeout(
                () => {
                    callback(e);
                    timer = null;
                },
                delay,
                e
            );
        };
    }

    function scrollHandler(e) {
        if (e.deltaY > 0) {
            if (page == lastPage) {
                return;
            }
            page++;
        } else if (e.deltaY < 0) {
            if (page == 1) {
                return;
            }
            page--;
        }
        let posTop = (page - 1) * document.body.clientHeight;
        html.scrollTo({ top: posTop, behavior: "smooth" });
        componentHanddler();
    } //풀페이지 스크롤 제어

    function componentHanddler() {
        q(".category__label").style.transform = `translateY(${-componentLineHeight * (page - 1)}px)`;
        q(".page_number__now").style.transform = `translateY(${-componentLineHeight * (page - 1)}px)`;
    } //카테고리, 페이지넘버 핸들러
</script>
